<style>
  /* å¼ºåˆ¶å…¨å®½æ ·å¼ï¼Œéšè—ä¸»é¢˜ä¾§è¾¹æ  */
  #sidebar,
  .sidebar,
  .widget-wrap,
  .aside,
  .right-sidebar,
  .secondary,
  .col-sidebar,
  .sidebar-container {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    opacity: 0 !important;
  }

  #main,
  .main,
  .content,
  .main-content,
  .primary,
  .col-main,
  .content-container {
    width: 100% !important;
    max-width: 100% !important;
    float: none !important;
    margin: 0 auto !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  .container,
  .wrapper,
  .site-content,
  .page-content {
    max-width: 100% !important;
    width: 100% !important;
  }

  .grid,
  .row {
    grid-template-columns: 1fr !important;
    display: block !important;
  }
</style>

<% const isTV=movie.media_type==='tv' ; const isMovie=movie.media_type==='movie' ; %>

  <!-- é“¾æ¥æ’­æ”¾å™¨ä¸“ç”¨æ ·å¼ -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <link rel="stylesheet" href="/player/style.css">

  <div class="main-container">
    <!-- å·¦ä¾§ä¸»å†…å®¹åŒºï¼šæ’­æ”¾å™¨å’Œå½±ç‰‡ä¿¡æ¯ -->
    <div class="player-wrapper">
      <div class="player-container">
        <video id="player" playsinline controls></video>
      </div>
      <div class="movie-info">
        <!-- å½±ç‰‡å°é¢ -->
        <div class="movie-poster-section">
          <div class="poster-container">
            <img class="movie-poster" id="movie-poster" alt="å½±ç‰‡å°é¢" style="display: none;" />
            <div class="poster-placeholder" id="poster-placeholder">
              <div class="placeholder-icon">ğŸ¬</div>
              <div class="placeholder-text">åŠ è½½å°é¢ä¸­...</div>
            </div>
          </div>
          <div class="movie-basic-info">
            <!-- è¯¦ç»†ä¿¡æ¯å°†ç”± script.js æ ¹æ®ä¸‹æ–¹æ³¨å…¥çš„æ•°æ®åŠ¨æ€å¡«å…… -->
            <h1 class="movie-title"></h1>
            <div class="movie-meta">
              <div class="movie-details"></div>
            </div>
          </div>
        </div>
        <div class="movie-overview-box">
          <h2>å‰§æƒ…ç®€ä»‹</h2>
          <p class="movie-overview"></p>
        </div>

        <!-- ç”µè§†å‰§ç‰¹æœ‰ä¿¡æ¯å ä½ç¬¦ -->
        <% if (isTV) { %>
          <div class="movie-tagline-box" style="display: none;">
            <h2>å®£ä¼ è¯­</h2>
            <p class="movie-tagline"></p>
          </div>
          <div class="movie-countries-box" style="display: none;">
            <h2>åˆ¶ä½œå›½å®¶</h2>
            <p class="movie-countries"></p>
          </div>
          <div class="movie-networks-box" style="display: none;">
            <h2>æ’­å‡ºå¹³å°</h2>
            <div class="networks-list"></div>
          </div>
          <div class="movie-companies-box" style="display: none;">
            <h2>åˆ¶ä½œå…¬å¸</h2>
            <div class="companies-list"></div>
          </div>
          <div class="movie-creators-box" style="display: none;">
            <h2>åˆ›ä½œè€…</h2>
            <div class="creators-list"></div>
          </div>
          <div class="episode-runtime-box" style="display: none;">
            <h2>å•é›†æ—¶é•¿</h2>
            <p class="episode-runtime"></p>
          </div>
          <div class="movie-language-box" style="display: none;">
            <h2>åŸå§‹è¯­è¨€</h2>
            <p class="movie-language"></p>
          </div>
          <div class="movie-languages-box" style="display: none;">
            <h2>æ”¯æŒè¯­è¨€</h2>
            <p class="movie-languages"></p>
          </div>
          <% } %>
      </div>
    </div>

    <!-- å³ä¾§è¾¹æ ï¼šé€‰é›†æˆ–ç‰‡æºåˆ—è¡¨ -->
    <div class="recommendations">
      <!-- æ­¤åŒºåŸŸå°†ç”± script.js åŠ¨æ€å¡«å…… -->
    </div>
  </div>

  <!-- Hls.js ç”¨äºæ’­æ”¾åœ¨çº¿è§†é¢‘æµ -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <!-- Plyr.js æ’­æ”¾å™¨æ ¸å¿ƒåº“ -->
  <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>

  <!-- å°†å½“å‰å½±ç‰‡æ•°æ®æ³¨å…¥åˆ°é¡µé¢ï¼Œä¾› script.js ä½¿ç”¨ -->
  <script type="application/json"
    id="movie-json"><%- JSON.stringify(movie).replace(/<\/script/g,'<\\/script') %></script>

  <!-- æ³¨å…¥ä¸€ä¸ªå¸®åŠ©è„šæœ¬ï¼Œç¡®ä¿ movieData åœ¨ä¸»è„šæœ¬åŠ è½½å‰å¯ç”¨ -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      try {
        // å°†JSONæ•°æ®èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ script.js è®¿é—®
        window.movieData = JSON.parse(document.getElementById('movie-json').textContent);
        console.log('ç”µå½±æ•°æ®å·²æˆåŠŸæ³¨å…¥:', window.movieData.title);
      } catch (error) {
        console.error('ç”µå½±æ•°æ®æ³¨å…¥å¤±è´¥:', error);
        window.movieData = null;
      }
    });
  </script>

  <!-- åŠ è½½ä¸»é€»è¾‘è„šæœ¬ -->
  <script src="/player/script.js"></script>