- const isTV = movie.media_type === 'tv';
- const isMovie = movie.media_type === 'movie';

//- é“¾æ¥æ’­æ”¾å™¨ä¸“ç”¨æ ·å¼
link(rel="stylesheet", href="https://cdn.plyr.io/3.7.8/plyr.css")
link(rel="stylesheet", href="/player/style.css")

.main-container
  //- å·¦ä¾§ä¸»å†…å®¹åŒºï¼šæ’­æ”¾å™¨å’Œå½±ç‰‡ä¿¡æ¯
  .player-wrapper
    .player-container
      video#player(playsinline, controls)
    .movie-info
      //- å½±ç‰‡å°é¢
      .movie-poster-section
        .poster-container
          img.movie-poster#movie-poster(alt="å½±ç‰‡å°é¢", style="display: none;")
          .poster-placeholder#poster-placeholder
            .placeholder-icon ğŸ¬
            .placeholder-text åŠ è½½å°é¢ä¸­...
        .movie-basic-info
          //- è¯¦ç»†ä¿¡æ¯å°†ç”± script.js æ ¹æ®ä¸‹æ–¹æ³¨å…¥çš„æ•°æ®åŠ¨æ€å¡«å……
          h1.movie-title
          .movie-meta
            .movie-details
      .movie-overview-box
        h2 å‰§æƒ…ç®€ä»‹
        p.movie-overview

      //- ç”µè§†å‰§ç‰¹æœ‰ä¿¡æ¯å ä½ç¬¦
      if isTV
        .movie-tagline-box(style="display: none;")
          h2 å®£ä¼ è¯­
          p.movie-tagline
        .movie-countries-box(style="display: none;")
          h2 åˆ¶ä½œå›½å®¶
          p.movie-countries
        .movie-networks-box(style="display: none;")
          h2 æ’­å‡ºå¹³å°
          .networks-list
        .movie-companies-box(style="display: none;")
          h2 åˆ¶ä½œå…¬å¸
          .companies-list
        .movie-creators-box(style="display: none;")
          h2 åˆ›ä½œè€…
          .creators-list
        .episode-runtime-box(style="display: none;")
          h2 å•é›†æ—¶é•¿
          p.episode-runtime
        .movie-language-box(style="display: none;")
          h2 åŸå§‹è¯­è¨€
          p.movie-language
        .movie-languages-box(style="display: none;")
          h2 æ”¯æŒè¯­è¨€
          p.movie-languages

  //- å³ä¾§è¾¹æ ï¼šé€‰é›†æˆ–ç‰‡æºåˆ—è¡¨
  .recommendations
    //- æ­¤åŒºåŸŸå°†ç”± script.js åŠ¨æ€å¡«å……

//- Hls.js ç”¨äºæ’­æ”¾åœ¨çº¿è§†é¢‘æµ
script(src="https://cdn.jsdelivr.net/npm/hls.js@latest")
//- Plyr.js æ’­æ”¾å™¨æ ¸å¿ƒåº“
script(src="https://cdn.plyr.io/3.7.8/plyr.js")

//- å°†å½“å‰å½±ç‰‡æ•°æ®æ³¨å…¥åˆ°é¡µé¢ï¼Œä¾› script.js ä½¿ç”¨
script(type="application/json")#movie-json!= JSON.stringify(movie).replace(/<\/script/g, '<\\/script')

//- æ³¨å…¥ä¸€ä¸ªå¸®åŠ©è„šæœ¬ï¼Œç¡®ä¿ movieData åœ¨ä¸»è„šæœ¬åŠ è½½å‰å¯ç”¨
script.
  document.addEventListener('DOMContentLoaded', function () {
    try {
      // å°†JSONæ•°æ®èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ script.js è®¿é—®
      window.movieData = JSON.parse(document.getElementById('movie-json').textContent);
      console.log('ç”µå½±æ•°æ®å·²æˆåŠŸæ³¨å…¥:', window.movieData.title);
    } catch (error) {
      console.error('ç”µå½±æ•°æ®æ³¨å…¥å¤±è´¥:', error);
      window.movieData = null;
    }
  });

//- åŠ è½½ä¸»é€»è¾‘è„šæœ¬
script(src="/player/script.js")